<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Readify | Home</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json"> 
    <link rel="icon" href="images/logotop.png" type="img/png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
            100% { transform: translateY(0px); }
        }
        .hero-image img {
            animation: float 6s ease-in-out infinite;
            box-shadow: 0 20px 50px rgba(108, 99, 255, 0.3) !important; 
            transition: src 0.5s ease-in-out; 
        }

        .brand-gradient {
            background: linear-gradient(45deg, #6C63FF, #FF6584);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            font-weight: 800;
        }
        .blob-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            overflow: hidden; z-index: -1; pointer-events: none;
        }
        .blob {
            position: absolute; filter: blur(80px); opacity: 0.4;
            animation: moveBlob 20s infinite alternate;
        }
        .blob-1 {
            top: -10%; left: -10%; width: 500px; height: 500px;
            background: #6C63FF; 
            border-radius: 40% 60% 70% 30% / 40% 50% 60% 50%;
        }
        .blob-2 {
            bottom: 10%; right: -10%; width: 400px; height: 400px;
            background: #FF6584; 
            border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%;
            animation-duration: 25s;
        }
        @keyframes moveBlob {
            0% { transform: translate(0, 0) rotate(0deg); }
            100% { transform: translate(50px, 50px) rotate(20deg); }
        }
        .author-highlight {
            backdrop-filter: blur(10px); 
            border: 1px solid rgba(108, 99, 255, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease;
        }
        .author-highlight:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
        }
        .auth-modal {
            display: none; position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.6); z-index: 2000;
            justify-content: center; align-items: center;
            backdrop-filter: blur(5px);
        }
        .auth-content {
            background: var(--card-bg, white);
            color: var(--text-color, #333);
            padding: 2rem; border-radius: 15px;
            width: 350px; text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3); position: relative;
            animation: slideDown 0.3s ease;
        }
        @keyframes slideDown {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .auth-content h2 { color: #6C63FF; margin-bottom: 15px; }
        .auth-content input {
            width: 100%; padding: 10px; margin: 10px 0;
            border: 1px solid #ddd; border-radius: 5px;
        }
        .close-auth {
            position: absolute; top: 10px; right: 15px;
            font-size: 1.5rem; cursor: pointer; color: #aaa;
        }
        .close-auth:hover { color: var(--primary-color); }

        .saved-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        .saved-book-card {
            background: var(--card-bg); 
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            border: 1px solid rgba(108, 99, 255, 0.2);
            box-shadow: var(--shadow); 
            color: var(--text-color);
        }
        .saved-book-card img {
            width: 100%;
            border-radius: 8px;
            margin-bottom: 10px;
        }
        .remove-btn {
            background: #FF6584;
            color: white;
            border: none;
            padding: 5px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.8rem;
            margin-top: 10px;
            transition: opacity 0.3s;
        }
        .remove-btn:hover { opacity: 0.8; }

        .tracker-summary-card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            border: 1px solid var(--primary-color);
            box-shadow: var(--shadow);
            color: var(--text-color);
        }
    </style>
</head>
<body style="position: relative;">

    <div class="blob-container">
        <div class="blob blob-1"></div>
        <div class="blob blob-2"></div>
    </div>

    <header>
        <nav class="navbar">
            <a href="index.html" class="logo">
                <img src="images/logo.png" alt="Readify Logo">
            </a>
            
            <ul class="nav-links" id="navLinks">
                <li><a href="index.html" class="active">Home</a></li>
                <li><a href="explorer.html">Book Explorer</a></li>
                <li><a href="tracker.html">Tracker</a></li>
                <li><a href="recommender.html">Recommender</a></li>
                <li><a href="flow.html">Reading Flow</a></li>
                <li><a href="feedback.html">Feedback</a></li>
                
                <li class="theme-toggle" onclick="toggleTheme()" style="list-style: none;">
                    <i class="fas fa-moon"></i>
                    <i class="fas fa-sun"></i>
                </li>

                <li id="login-container"></li>
            </ul>
            <div class="hamburger" id="hamburger"><i class="fas fa-bars"></i></div>
        </nav>
    </header>

    <main>
        <div id="home-view">
            <section class="hero-container">
                <div class="hero-text">
                    <h1>Welcome to <span class="brand-gradient">Readify</span></h1>
                    
                    <div id="quote-display" style="min-height: 60px; font-style: italic; font-size: 1.1rem; opacity: 0.8;">
                        <p>"A room without books is like a body without a soul."</p>
                    </div>
                    
                    <a href="explorer.html" class="cta-btn" style="text-decoration: none; display: inline-block; margin-top: 25px; padding: 15px 35px; box-shadow: 0 10px 20px rgba(108, 99, 255, 0.3);">
                        Start Reading
                    </a>
                </div>
                
                <div class="hero-image">
                    <img id="heroImg" src="./images/hero-light.jpg" alt="Hero image" style="width: 100%; max-width: 550px; border-radius: 20px;">
                </div>
            </section>

            <section class="featured-section" style="margin-top: 5rem;">
                <h2 style="text-align: center; margin-bottom: 1.5rem;">Author of the Day</h2>
                
                <div id="author-card" class="card author-highlight" style="max-width: 700px; margin: 0 auto; text-align: center; border-left: 5px solid var(--primary-color);">
                    <p>Loading author...</p>
                </div>
            </section>
        </div>

        <section id="account-view" style="display: none; padding: 50px 5%; min-height: 70vh;">
            <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 20px;">
                <h2 class="brand-gradient" style="font-size: 2.5rem;">My Library</h2>
                
                <div style="display: flex; gap: 15px;">
                    <button onclick="logout()" class="secondary-btn" style="border-color: #FF6584; color: #FF6584; font-weight: bold; padding: 10px 20px;">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </button>
                    <button onclick="hideAccount()" class="cta-btn" style="padding: 10px 25px;">Back to Home</button>
                </div>
            </div>
            <p style="color: var(--text-color); opacity: 0.7; margin: 10px 0 30px 0;">Manage your saved collection, <span id="display-username" style="color: var(--primary-color); font-weight: bold;"></span>.</p>
            
            <div id="tracker-summary" class="tracker-summary-card" style="display: none;">
                <h3 style="margin-bottom: 15px; color: var(--primary-color);"><i class="fas fa-chart-line"></i> Reading Progress</h3>
                <div class="progress-container" style="background: #eee; border-radius: 20px; height: 25px; width: 100%; overflow: hidden;">
                    <div id="acc-progress-bar" class="progress-bar" style="background: linear-gradient(90deg, #6C63FF, #FF6584); height: 100%; width: 0%; color: white; text-align: center; line-height: 25px; transition: width 0.5s;">0%</div>
                </div>
                <div style="display: flex; justify-content: space-between; margin-top: 15px;">
                    <p>Completed: <strong id="acc-percent-text">0%</strong></p>
                    <p>Estimated Days Left: <strong id="acc-days-left">0</strong></p>
                </div>
            </div>

            <div id="saved-books-grid" class="saved-grid"></div>
        </section>
    </main>

    <footer>
        <div class="footer-content" style="max-width: 800px; margin: 0 auto;">
            <h3>Newsletter</h3>
            <p style="margin-bottom: 15px; font-size: 0.9rem;">Subscribe to get the latest book updates.</p>
            <div style="display: flex; gap: 10px; justify-content: center; margin-bottom: 20px;">
                <input type="email" id="newsletter-email" placeholder="Enter your email" style="padding: 12px; border-radius: 5px; border: none; width: 60%;">
                <button onclick="subscribeNewsletter()" class="cta-btn" style="padding: 12px 25px; font-size: 0.9rem; margin: 0;">Subscribe</button>
            </div>
            <div class="footer-menu">
                <a href="index.html">Home</a>
                <a href="explorer.html">Book Explorer</a>
                <a href="tracker.html">Tracker</a>
                <a href="recommender.html">Recommender</a>
                <a href="flow.html">Reading Flow</a>
                <a href="feedback.html">Feedback</a>
            </div>
        </div>
        <p style="margin-top: 1rem; opacity: 0.7; font-size: 0.8rem;">&copy; 2026 Readify. All rights reserved.</p>
    </footer>

    <script>
        function showAccount() {
            const user = localStorage.getItem("readifyUser");
            document.getElementById('home-view').style.display = 'none';
            document.getElementById('account-view').style.display = 'block';
            
            const nameSpan = document.getElementById('display-username');
            if (nameSpan) nameSpan.innerText = user || "Reader";

            const trackerData = JSON.parse(localStorage.getItem("userTrackerProgress"));
            const trackerCard = document.getElementById('tracker-summary');
            if (trackerData) {
                trackerCard.style.display = 'block';
                document.getElementById('acc-progress-bar').style.width = trackerData.percent + "%";
                document.getElementById('acc-progress-bar').innerText = Math.round(trackerData.percent) + "%";
                document.getElementById('acc-percent-text').innerText = trackerData.percent + "%";
                document.getElementById('acc-days-left').innerText = trackerData.days;
            } else {
                trackerCard.style.display = 'none';
            }

            loadSavedBooks();
        }

        function hideAccount() {
            document.getElementById('account-view').style.display = 'none';
            document.getElementById('home-view').style.display = 'block';
        }

        function loadSavedBooks() {
            const grid = document.getElementById('saved-books-grid');
            const savedBooks = JSON.parse(localStorage.getItem('userLibrary')) || [];
            
            grid.innerHTML = '';
            
            if (savedBooks.length === 0) {
                grid.innerHTML = '<p style="grid-column: 1/-1; text-align: center; padding: 50px; opacity: 0.5; color: var(--text-color);">Your library is empty. Add books from the Explorer!</p>';
                return;
            }

            savedBooks.forEach((book, index) => {
                grid.innerHTML += `
                    <div class="saved-book-card author-highlight">
                        <img src="${book.image}" alt="${book.title}" onerror="this.src='https://via.placeholder.com/150'">
                        <h4 style="color: var(--text-color); font-size: 0.9rem;">${book.title}</h4>
                        <button class="remove-btn" onclick="removeBook(${index})">Remove</button>
                    </div>
                `;
            });
        }

        function removeBook(index) {
            let savedBooks = JSON.parse(localStorage.getItem('userLibrary')) || [];
            savedBooks.splice(index, 1);
            localStorage.setItem('userLibrary', JSON.stringify(savedBooks));
            loadSavedBooks(); 
        }

        document.addEventListener('click', (e) => {
            if(e.target.innerText === 'H' || e.target.classList.contains('user-avatar')) {
                showAccount();
            }
        });

        // Verify scripts loaded
        document.addEventListener('DOMContentLoaded', () => {
            console.log("✓ Index page loaded");
            console.log("✓ bookData available:", typeof bookData !== 'undefined');
            console.log("✓ Auth functions available:", typeof setupGlobalLogin !== 'undefined');
        });
    </script>

    <script src="js/books.js"></script>
    <script src="js/auth.js"></script>
    <script src="script.js"></script>
    <script src="js/index.js"></script>
    <script src="debug.js"></script>

</body>
</html>